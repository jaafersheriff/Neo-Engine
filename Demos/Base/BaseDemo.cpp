#include "BaseDemo.hpp"
#include "Engine/Engine.hpp"

#include "ECS/ECS.hpp"
#include "ECS/Component/CameraComponent/CameraComponent.hpp"
#include "ECS/Component/CameraComponent/CameraControllerComponent.hpp"
#include "ECS/Component/CameraComponent/MainCameraComponent.hpp"
#include "ECS/Component/CameraComponent/PerspectiveCameraComponent.hpp"
#include "ECS/Component/CollisionComponent/BoundingBoxComponent.hpp"
#include "ECS/Component/LightComponent/LightComponent.hpp"
#include "ECS/Component/RenderableComponent/AlphaTestRenderable.hpp"
#include "ECS/Component/RenderableComponent/MeshComponent.hpp"
#include "ECS/Component/RenderableComponent/PhongRenderable.hpp"
#include "ECS/Component/SelectingComponent/SelectableComponent.hpp"
#include "ECS/Component/SpatialComponent/SpatialComponent.hpp"
#include "ECS/Component/TransformationComponent/RotationComponent.hpp"

#include "ECS/Systems/CameraSystems/CameraControllerSystem.hpp"
#include "ECS/Systems/TranslationSystems/RotationSystem.hpp"

#include "Renderer/Shader/PhongShader.hpp"
#include "Renderer/Shader/AlphaTestShader.hpp"

#include "Renderer/GLObjects/Material.hpp"

#include "glm/gtc/matrix_transform.hpp"

using namespace neo;

/* Game object definitions */
namespace {
}

IDemo::Config BaseDemo::getConfig() const {
    IDemo::Config config;
    config.name = "Base Demo";
    return config;
}

void BaseDemo::init(ECS& ecs) {

    /* Camera */
    {
        GameObject* gameObject = &ecs.createGameObject("Camera");
        ecs.addComponent<SpatialComponent>(gameObject, glm::vec3(0, 0.6f, 5), glm::vec3(1.f));
        ecs.addComponentAs<PerspectiveCameraComponent, CameraComponent>(gameObject, 1.f, 100.f, 45.f);
        ecs.addComponent<CameraControllerComponent>(gameObject, 0.4f, 7.f);
        ecs.addComponent<MainCameraComponent>(gameObject);
    }

    {
        auto& gameObject = ecs.createGameObject("Light");
        ecs.addComponent<SpatialComponent>(&gameObject, glm::vec3(0.f, 2.f, 20.f));
        ecs.addComponent<LightComponent>(&gameObject, glm::vec3(1.f), glm::vec3(0.6, 0.2, 0.f));
    }

    /* Bunny object */
    GameObject* bunny = &ecs.createGameObject("Bunny");
    ecs.addComponent<SpatialComponent>(bunny, glm::vec3(0.f, 1.0f, 0.f));
    ecs.addComponent<RotationComponent>(bunny, glm::vec3(0.f, 1.0f, 0.f));
    ecs.addComponent<MeshComponent>(bunny, *Library::loadMesh("bunny.obj", true));
    ecs.addComponent<renderable::PhongRenderable>(bunny, *Library::getTexture("black"), Material(glm::vec3(0.2f), glm::vec3(1.f,0.f,1.f)));
    ecs.addComponent<SelectableComponent>(bunny);
    ecs.addComponent<BoundingBoxComponent>(bunny, *Library::loadMesh("bunny.obj", true));

    {
        GameObject* cube = &ecs.createGameObject("Cube");
        ecs.addComponent<SpatialComponent>(cube, glm::vec3(0.f, 1.0f, 0.f));
        ecs.addComponent<RotationComponent>(cube, util::genRandomVec3());
        ecs.addComponent<renderable::PhongRenderable>(cube, *Library::getTexture("black"), Material(glm::vec3(0.2f), glm::vec3(1.f, 0.f, 1.f)));
        ecs.addComponent<SelectableComponent>(cube);

        Mesh* mesh = new Mesh;
        {
            std::vector<glm::vec3> verts_ = {
                {-621.428772, 123.005669, 168.1956},
                {-616.388489, 123.005669, 168.1794},
                {-616.333496, 123.070366, 168.7036},
                {-621.480408, 123.070366, 168.7202},
                {-621.466187, 124.282669, 168.5766},
                {-616.348572, 124.282669, 168.5601},
                {-616.443604, 126.172867, 167.6543},
                {-621.377075, 126.172867, 167.6702},
                {-616.631470, 127.539070, 165.8636},
                {-621.200684, 127.539070, 165.8783},
                {-616.963318, 128.146072, 162.7019},
                {-620.889282, 128.146072, 162.7146},
                {-620.539307, 127.531975, 159.1591},
                {-617.336182, 127.531975, 159.1488},
                {-617.320312, 124.054779, 159.3011},
                {-620.554321, 124.054779, 159.3115},
                {-617.355286, 123.875481, 158.9670},
                {-620.521423, 123.875481, 158.9772},
                {-621.247375, 123.538368, 166.3534},
                {-616.581726, 123.538368, 166.3384},
                {-621.216309, 123.042267, 166.0368},
                {-616.614929, 123.042267, 166.0220},
                {-621.225525, 121.465866, 166.1306},
                {-616.604980, 121.465866, 166.1157},
                {-621.372681, 119.859268, 167.6264},
                {-616.448181, 119.859268, 167.6105},
                {-621.255310, 114.804573, 166.4332},
                {-616.573425, 114.804573, 166.4181},
                {-616.410217, 117.216568, 167.9723},
                {-621.408386, 117.216568, 167.9884},
                {-620.955872, 112.837776, 163.3911},
                {-616.892395, 112.837776, 163.3779},
                {-620.453918, 111.345573, 158.2915},
                {-617.427185, 111.345573, 158.2818},
                {-619.400513, 109.628975, 147.5888},
                {-618.549683, 109.628975, 147.5861},
                {-619.435974, 108.854378, 147.9499},
                {-618.511780, 108.854378, 147.9469},
                {-619.320312, 107.993477, 146.7751},
                {-618.635010, 107.993477, 146.7729},
                {-618.524597, 108.040474, 147.8250},
                {-619.424011, 108.040474, 147.8279},
                {-619.202698, 106.817978, 145.5797},
                {-618.760376, 106.817978, 145.5783},
                {-618.760925, 107.077881, 145.5739},
                {-619.202209, 107.077881, 145.5753},
                {-619.347412, 105.990479, 147.0486},
                {-618.606384, 105.990479, 147.0462},
                {-619.396912, 104.931778, 147.5515},
                {-618.553711, 104.931778, 147.5488},
                {-619.316223, 104.801880, 146.7316},
                {-618.639587, 104.801880, 146.7294},
                {-619.068909, 123.005676, 118.4928},
                {-624.083801, 123.005676, 119.0193},
                {-624.191589, 123.070374, 118.5039},
                {-619.070618, 123.070374, 117.9662},
                {-628.888000, 123.005676, 120.5441},
                {-629.097412, 123.070374, 120.0609},
                {-633.286926, 123.005676, 123.0047},
                {-633.589294, 123.070374, 122.5735},
                {-637.100525, 123.005676, 126.3004},
                {-637.483521, 123.070374, 125.9389},
                {-640.172607, 123.005676, 130.2963},
                {-640.620605, 123.070374, 130.0193},
                {-642.377502, 123.005676, 134.8288},
                {-642.872070, 123.070374, 134.6477},
                {-643.624878, 123.005676, 139.7124},
                {-644.145874, 123.070374, 139.6345},
                {-643.863708, 123.005676, 144.7471},
                {-644.389771, 123.070374, 144.7757},
                {-643.084229, 123.005676, 149.7268},
                {-643.593811, 123.070374, 149.8607},
                {-641.318298, 123.005676, 154.4476},
                {-641.790527, 123.070374, 154.6814},
                {-638.638184, 123.005676, 158.7164},
                {-639.053772, 123.070374, 159.0405},
                {-635.153687, 123.005676, 162.3583},
                {-635.495605, 123.070374, 162.7594},
                {-631.007507, 123.005669, 165.2243},
                {-631.261719, 123.070366, 165.6860},
                {-626.369202, 123.005669, 167.1970},
                {-626.525330, 123.070366, 167.7004},
                {-613.946228, 123.070374, 118.4708},
                {-614.050720, 123.005676, 118.9869},
                {-609.030518, 123.070374, 119.9962},
                {-609.236816, 123.005676, 120.4807},
                {-604.522522, 123.070374, 122.4798},
                {-604.822021, 123.005676, 122.9129},
                {-600.606628, 123.070374, 125.8200},
                {-600.987305, 123.005676, 126.1839},
                {-597.443176, 123.070374, 129.8801},
                {-597.889526, 123.005676, 130.1599},
                {-595.161926, 123.070374, 134.4939},
                {-595.655396, 123.005676, 134.6781},
                {-593.856018, 123.070374, 139.4724},
                {-594.376526, 123.005676, 139.5536},
                {-593.578979, 123.070374, 144.6118},
                {-594.105225, 123.005676, 144.5866},
                {-594.342224, 123.070374, 149.7019},
                {-594.852600, 123.005676, 149.5712},
                {-596.114319, 123.070374, 154.5341},
                {-596.588074, 123.005676, 154.3034},
                {-598.822876, 123.070374, 158.9107},
                {-599.240479, 123.005676, 158.5894},
                {-602.356995, 123.070374, 162.6525},
                {-602.701477, 123.005676, 162.2537},
                {-606.572021, 123.070366, 165.6064},
                {-606.829102, 123.005669, 165.1463},
                {-611.295288, 123.070366, 167.6513},
                {-611.454590, 123.005669, 167.1489},
                {-619.070129, 124.282677, 118.1105},
                {-624.161987, 124.282677, 118.6451},
                {-623.975830, 126.172874, 119.5366},
                {-619.067200, 126.172874, 119.0213},
                {-629.039978, 124.282677, 120.1933},
                {-628.678101, 126.172874, 121.0291},
                {-633.506470, 124.282677, 122.6917},
                {-632.983826, 126.172874, 123.4375},
                {-637.378601, 124.282677, 126.0380},
                {-636.716370, 126.172874, 126.6633},
                {-640.497925, 124.282677, 130.0953},
                {-639.723389, 126.172874, 130.5745},
                {-642.736572, 124.282677, 134.6974},
                {-641.881592, 126.172874, 135.0109},
                {-644.003174, 124.282677, 139.6559},
                {-643.102478, 126.172874, 139.7909},
                {-644.245728, 124.282677, 144.7679},
                {-643.336182, 126.172874, 144.7189},
                {-643.454224, 124.282677, 149.8241},
                {-642.573303, 126.172874, 149.5930},
                {-641.661194, 124.282677, 154.6175},
                {-640.844788, 126.172874, 154.2137},
                {-638.939880, 124.282677, 158.9518},
                {-638.221619, 126.172874, 158.3920},
                {-635.401978, 124.282677, 162.6496},
                {-634.810974, 126.172874, 161.9567},
                {-631.192078, 124.282669, 165.5596},
                {-630.752625, 126.172867, 164.7619},
                {-626.482483, 124.282669, 167.5626},
                {-626.212708, 126.172867, 166.6927},
                {-614.155396, 126.172874, 119.5049},
                {-613.974915, 124.282677, 118.6123},
                {-609.443481, 126.172874, 120.9670},
                {-609.086975, 124.282677, 120.1290},
                {-605.122375, 126.172874, 123.3476},
                {-604.604492, 124.282677, 122.5985},
                {-601.369019, 126.172874, 126.5493},
                {-600.710876, 124.282677, 125.9198},
                {-598.336914, 126.172874, 130.4410},
                {-597.565491, 124.282677, 129.9568},
                {-596.150085, 126.172874, 134.8634},
                {-595.297119, 124.282677, 134.5444},
                {-594.898376, 126.172874, 139.6355},
                {-593.998596, 124.282677, 139.4947},
                {-594.632874, 126.172874, 144.5618},
                {-593.723083, 124.282677, 144.6050},
                {-595.364380, 126.172874, 149.4407},
                {-594.481995, 124.282677, 149.6662},
                {-597.062988, 126.172874, 154.0726},
                {-596.244080, 124.282677, 154.4710},
                {-599.659180, 126.172874, 158.2677},
                {-598.937317, 124.282677, 158.8228},
                {-603.046814, 126.172874, 161.8543},
                {-602.451416, 124.282677, 162.5434},
                {-607.086975, 126.172867, 164.6856},
                {-606.642395, 124.282669, 165.4805},
                {-611.614319, 126.172867, 166.6457},
                {-611.338928, 124.282669, 167.5138},
                {-623.607483, 127.539078, 121.2991},
                {-619.061401, 127.539078, 120.8218},
                {-627.962585, 127.539078, 122.6813},
                {-631.950317, 127.539078, 124.9119},
                {-635.407288, 127.539078, 127.8995},
                {-638.192322, 127.539078, 131.5219},
                {-640.190979, 127.539078, 135.6307},
                {-641.321777, 127.539078, 140.0577},
                {-641.538330, 127.539078, 144.6218},
                {-640.831726, 127.539078, 149.1360},
                {-639.230896, 127.539078, 153.4155},
                {-636.801270, 127.539078, 157.2852},
                {-633.642578, 127.539078, 160.5867},
                {-629.883972, 127.539078, 163.1848},
                {-625.679321, 127.539070, 164.9730},
                {-614.512329, 127.539078, 121.2697},
                {-610.148376, 127.539078, 122.6239},
                {-606.146423, 127.539078, 124.8287},
                {-602.669983, 127.539078, 127.7939},
                {-599.861816, 127.539078, 131.3983},
                {-597.836609, 127.539078, 135.4941},
                {-596.677307, 127.539078, 139.9138},
                {-596.431396, 127.539078, 144.4763},
                {-597.108887, 127.539078, 148.9950},
                {-598.682129, 127.539078, 153.2848},
                {-601.086609, 127.539078, 157.1701},
                {-604.223999, 127.539078, 160.4918},
                {-607.965820, 127.539078, 163.1141},
                {-612.158875, 127.539070, 164.9294},
                {-610.089783, 123.875481, 130.5327},
                {-612.862915, 123.875481, 129.0049},
                {-615.886780, 123.875481, 128.0667},
                {-622.189087, 123.875481, 128.0870},
                {-619.039001, 123.875481, 127.7562},
                {-625.206909, 123.875481, 129.0448},
                {-627.970093, 123.875481, 130.5904},
                {-632.295288, 123.875481, 135.1707},
                {-630.365601, 123.875481, 132.6606},
                {-603.357971, 123.875481, 144.1471},
                {-633.680420, 123.875481, 138.0177},
                {-634.463928, 123.875481, 141.0854},
                {-634.614014, 123.875481, 144.2479},
                {-603.528381, 123.875481, 140.9856},
                {-604.331787, 123.875481, 137.9231},
                {-605.735107, 123.875481, 135.0850},
                {-607.681030, 123.875481, 132.5874},
                {-629.142822, 123.875481, 155.3105},
                {-626.538330, 123.875481, 157.1107},
                {-623.624817, 123.875481, 158.3499},
                {-633.015015, 123.875481, 150.3413},
                {-611.350586, 123.875481, 157.0617},
                {-614.256104, 123.875481, 158.3197},
                {-608.757812, 123.875481, 155.2447},
                {-606.583801, 123.875481, 152.9430},
                {-603.827515, 123.875481, 147.2782},
                {-604.917725, 123.875481, 150.2507},
                {-634.124329, 123.875481, 147.3759},
                {-631.331482, 123.875481, 153.0228},
                {-622.957275, 128.145981, 124.4109},
                {-619.051086, 128.145981, 124.0008},
                {-626.699280, 128.145981, 125.5986},
                {-630.125610, 128.145981, 127.5152},
                {-633.096008, 128.145981, 130.0822},
                {-635.488892, 128.145981, 133.1946},
                {-637.206299, 128.145981, 136.7250},
                {-638.177917, 128.145966, 140.5288},
                {-638.363892, 128.145966, 144.4504},
                {-637.756775, 128.145966, 148.3291},
                {-636.381287, 128.145966, 152.0062},
                {-634.293823, 128.146072, 155.3311},
                {-631.579712, 128.146072, 158.1678},
                {-628.350220, 128.146072, 160.4002},
                {-624.737427, 128.146072, 161.9367},
                {-615.142395, 128.146088, 124.3857},
                {-611.392822, 128.146088, 125.5492},
                {-607.954224, 128.146088, 127.4436},
                {-604.967285, 128.146088, 129.9915},
                {-602.554382, 128.146088, 133.0884},
                {-600.814270, 128.146088, 136.6077},
                {-599.818176, 128.146088, 140.4051},
                {-599.606812, 128.146072, 144.3254},
                {-600.189026, 128.146072, 148.2079},
                {-601.540710, 128.146072, 151.8938},
                {-603.606812, 128.146072, 155.2322},
                {-606.302490, 128.146072, 158.0863},
                {-609.517517, 128.146072, 160.3394},
                {-613.120300, 128.146072, 161.8992},
                {-619.039612, 127.531975, 127.5734},
                {-622.226624, 127.531975, 127.9080},
                {-622.257874, 124.054779, 127.7581},
                {-619.040100, 124.054779, 127.4203},
                {-625.279480, 127.531975, 128.8770},
                {-625.340393, 124.054779, 128.7365},
                {-628.075012, 127.531975, 130.4407},
                {-628.162903, 124.054779, 130.3153},
                {-630.498474, 127.531975, 132.5351},
                {-630.609924, 124.054779, 132.4299},
                {-632.450806, 127.531975, 135.0745},
                {-632.581116, 124.054779, 134.9939},
                {-633.851990, 127.531975, 137.9548},
                {-633.995789, 124.054779, 137.9021},
                {-634.644714, 127.531975, 141.0583},
                {-634.796082, 124.054779, 141.0356},
                {-634.796387, 127.531975, 144.2578},
                {-634.949402, 124.054779, 144.2660},
                {-634.301086, 127.531975, 147.4223},
                {-634.449280, 124.054779, 147.4612},
                {-633.178894, 127.531975, 150.4224},
                {-633.316223, 124.054779, 150.4903},
                {-631.475708, 127.531975, 153.1351},
                {-631.596619, 124.054779, 153.2293},
                {-629.261414, 127.531975, 155.4496},
                {-629.360779, 124.054779, 155.5661},
                {-626.626526, 127.531975, 157.2708},
                {-626.700378, 124.054779, 157.4050},
                {-623.678894, 127.531975, 158.5245},
                {-623.724304, 124.054779, 158.6708},
                {-615.820190, 124.054779, 127.7373},
                {-615.850586, 127.531975, 127.8875},
                {-612.731384, 124.054779, 128.6958},
                {-612.791382, 127.531975, 128.8367},
                {-609.898682, 124.054779, 130.2564},
                {-609.985901, 127.531975, 130.3824},
                {-607.438171, 124.054779, 132.3552},
                {-607.549011, 127.531975, 132.4611},
                {-605.450623, 124.054779, 134.9064},
                {-605.580322, 127.531975, 134.9878},
                {-604.017090, 124.054779, 137.8054},
                {-604.160583, 127.531975, 137.8591},
                {-603.196472, 124.054779, 140.9337},
                {-603.347778, 127.531975, 140.9574},
                {-603.022522, 124.054779, 144.1631},
                {-603.175415, 127.531975, 144.1558},
                {-603.502014, 124.054779, 147.3614},
                {-603.650391, 127.531975, 147.3235},
                {-604.615479, 124.054779, 150.3977},
                {-604.753174, 127.531975, 150.3307},
                {-606.317383, 124.054779, 153.1478},
                {-606.438904, 127.531975, 153.0544},
                {-608.538086, 124.054779, 155.4989},
                {-608.638184, 127.531975, 155.3831},
                {-611.186584, 124.054779, 157.3550},
                {-611.261414, 127.531975, 157.2213},
                {-614.154480, 124.054779, 158.6399},
                {-614.200806, 127.531975, 158.4939},
                {-619.062927, 123.538376, 120.3440},
                {-623.705200, 123.538376, 120.8314},
                {-628.152283, 123.538376, 122.2428},
                {-632.224426, 123.538376, 124.5206},
                {-635.754578, 123.538376, 127.5714},
                {-638.598389, 123.538376, 131.2704},
                {-640.639526, 123.538376, 135.4661},
                {-641.794128, 123.538376, 139.9867},
                {-642.015320, 123.538376, 144.6473},
                {-641.293579, 123.538376, 149.2570},
                {-639.658875, 123.538376, 153.6270},
                {-637.177979, 123.538376, 157.5786},
                {-633.952515, 123.538376, 160.9499},
                {-630.114380, 123.538376, 163.6028},
                {-625.820679, 123.538368, 165.4290},
                {-614.417603, 123.538376, 120.8014},
                {-609.961426, 123.538376, 122.1842},
                {-605.874817, 123.538376, 124.4356},
                {-602.325012, 123.538376, 127.4636},
                {-599.457275, 123.538376, 131.1441},
                {-597.389282, 123.538376, 135.3266},
                {-596.205383, 123.538376, 139.8397},
                {-595.954285, 123.538376, 144.4987},
                {-596.646118, 123.538376, 149.1130},
                {-598.252625, 123.538376, 153.4935},
                {-600.708008, 123.538376, 157.4610},
                {-603.911682, 123.538376, 160.8530},
                {-607.732727, 123.538376, 163.5307},
                {-612.014526, 123.538368, 165.3844},
                {-619.061890, 123.042274, 120.6622},
                {-623.640076, 123.042274, 121.1429},
                {-628.025879, 123.042274, 122.5349},
                {-632.041687, 123.042274, 124.7812},
                {-635.523315, 123.042274, 127.7899},
                {-638.327881, 123.042274, 131.4379},
                {-640.340698, 123.042274, 135.5757},
                {-641.479492, 123.042274, 140.0340},
                {-641.697510, 123.042274, 144.6302},
                {-640.985901, 123.042274, 149.1763},
                {-639.373779, 123.042274, 153.4860},
                {-636.927124, 123.042274, 157.3831},
                {-633.745972, 123.042274, 160.7078},
                {-629.960876, 123.042274, 163.3242},
                {-625.726501, 123.042267, 165.1251},
                {-614.480713, 123.042274, 121.1133},
                {-610.085876, 123.042274, 122.4770},
                {-606.055725, 123.042274, 124.6974},
                {-602.554871, 123.042274, 127.6836},
                {-599.726807, 123.042274, 131.3134},
                {-597.687317, 123.042274, 135.4381},
                {-596.519775, 123.042274, 139.8890},
                {-596.272217, 123.042274, 144.4837},
                {-596.954407, 123.042274, 149.0343},
                {-598.538818, 123.042274, 153.3544},
                {-600.960327, 123.042274, 157.2671},
                {-604.119812, 123.042274, 160.6123},
                {-607.888000, 123.042274, 163.2531},
                {-612.110718, 123.042267, 165.0812},
                {-619.062195, 121.465874, 120.5681},
                {-623.659424, 121.465874, 121.0508},
                {-628.063416, 121.465874, 122.4485},
                {-632.095825, 121.465874, 124.7042},
                {-635.591675, 121.465874, 127.7253},
                {-638.408020, 121.465874, 131.3884},
                {-640.429077, 121.465874, 135.5433},
                {-641.572571, 121.465874, 140.0201},
                {-641.791626, 121.465874, 144.6354},
                {-641.077026, 121.465874, 149.2002},
                {-639.458191, 121.465874, 153.5278},
                {-637.001282, 121.465874, 157.4410},
                {-633.807129, 121.465874, 160.7796},
                {-630.006287, 121.465874, 163.4068},
                {-625.754395, 121.465866, 165.2151},
                {-614.461975, 121.465874, 121.0211},
                {-610.049072, 121.465874, 122.3904},
                {-606.002075, 121.465874, 124.6200},
                {-602.486816, 121.465874, 127.6186},
                {-599.646973, 121.465874, 131.2634},
                {-597.599121, 121.465874, 135.4052},
                {-596.426819, 121.465874, 139.8745},
                {-596.178101, 121.465874, 144.4883},
                {-596.863220, 121.465874, 149.0577},
                {-598.453979, 121.465874, 153.3956},
                {-600.885620, 121.465874, 157.3246},
                {-604.058228, 121.465874, 160.6836},
                {-607.841980, 121.465874, 163.3353},
                {-612.082214, 121.465866, 165.1711},
                {-619.067017, 119.859276, 119.0651},
                {-623.966797, 119.859276, 119.5795},
                {-628.660583, 119.859276, 121.0693},
                {-632.958496, 119.859276, 123.4734},
                {-636.684509, 119.859276, 126.6934},
                {-639.686096, 119.859276, 130.5975},
                {-641.840271, 119.859276, 135.0259},
                {-643.059082, 119.859276, 139.7973},
                {-643.292419, 119.859276, 144.7164},
                {-642.530823, 119.859276, 149.5817},
                {-640.805420, 119.859276, 154.1942},
                {-638.187012, 119.859276, 158.3649},
                {-634.782471, 119.859276, 161.9232},
                {-630.731384, 119.859268, 164.7233},
                {-626.199707, 119.859268, 166.6507},
                {-614.164124, 119.859276, 119.5479},
                {-609.460693, 119.859276, 121.0073},
                {-605.147400, 119.859276, 123.3837},
                {-601.400696, 119.859276, 126.5796},
                {-598.374023, 119.859276, 130.4643},
                {-596.191284, 119.859276, 134.8787},
                {-594.941772, 119.859276, 139.6422},
                {-594.676697, 119.859276, 144.5596},
                {-595.406921, 119.859276, 149.4297},
                {-597.102478, 119.859276, 154.0532},
                {-599.694092, 119.859276, 158.2408},
                {-603.075500, 119.859276, 161.8209},
                {-607.108398, 119.859268, 164.6471},
                {-611.627625, 119.859268, 166.6037},
                {-619.063171, 114.804581, 120.2642},
                {-623.721619, 114.804581, 120.7533},
                {-624.041199, 117.216576, 119.2234},
                {-619.068176, 117.216576, 118.7013},
                {-628.184082, 114.804581, 122.1696},
                {-628.805176, 117.216576, 120.7355},
                {-632.270325, 114.804581, 124.4553},
                {-633.167297, 117.216576, 123.1755},
                {-635.812683, 114.804581, 127.5167},
                {-636.948975, 117.216576, 126.4436},
                {-638.666382, 114.804581, 131.2285},
                {-639.995422, 117.216576, 130.4061},
                {-640.714478, 114.804581, 135.4387},
                {-642.181885, 117.216576, 134.9007},
                {-641.873230, 114.804581, 139.9751},
                {-643.418823, 117.216576, 139.7434},
                {-642.095093, 114.804581, 144.6518},
                {-643.655579, 117.216576, 144.7360},
                {-641.370972, 114.804581, 149.2774},
                {-642.882629, 117.216576, 149.6740},
                {-639.730713, 114.804581, 153.6626},
                {-641.131470, 117.216576, 154.3554},
                {-637.241089, 114.804581, 157.6279},
                {-638.473877, 117.216576, 158.5885},
                {-634.004395, 114.804581, 161.0109},
                {-635.018616, 117.216576, 162.1999},
                {-630.153015, 114.804581, 163.6731},
                {-630.906982, 117.216568, 165.0419},
                {-625.844421, 114.804573, 165.5055},
                {-626.307495, 117.216568, 166.9981},
                {-614.091980, 117.216576, 119.1913},
                {-614.401672, 114.804581, 120.7232},
                {-609.318298, 117.216576, 120.6726},
                {-609.930115, 114.804581, 122.1108},
                {-604.940613, 117.216576, 123.0844},
                {-605.829285, 114.804581, 124.3700},
                {-601.137878, 117.216576, 126.3281},
                {-602.267212, 114.804581, 127.4085},
                {-598.065918, 117.216576, 130.2709},
                {-599.389587, 114.804581, 131.1018},
                {-595.850586, 117.216576, 134.7513},
                {-597.314392, 114.804581, 135.2988},
                {-594.582397, 117.216576, 139.5859},
                {-596.126526, 114.804581, 139.8275},
                {-594.313416, 117.216576, 144.5769},
                {-595.874512, 114.804581, 144.5027},
                {-595.054504, 117.216576, 149.5198},
                {-596.568726, 114.804581, 149.1329},
                {-596.775513, 117.216576, 154.2124},
                {-598.180725, 114.804581, 153.5287},
                {-599.405701, 117.216576, 158.4625},
                {-600.644714, 114.804581, 157.5099},
                {-602.837708, 117.216576, 162.0962},
                {-603.859497, 114.804581, 160.9137},
                {-606.930786, 117.216568, 164.9646},
                {-607.693726, 114.804581, 163.6006},
                {-611.517578, 117.216568, 166.9504},
                {-611.990173, 114.804573, 165.4608},
                {-619.053284, 112.837776, 123.3210},
                {-623.096313, 112.837677, 123.7455},
                {-626.969421, 112.837677, 124.9748},
                {-630.515686, 112.837677, 126.9585},
                {-633.590271, 112.837677, 129.6155},
                {-636.067017, 112.837776, 132.8369},
                {-637.844482, 112.837776, 136.4910},
                {-638.850220, 112.837776, 140.4281},
                {-639.042725, 112.837776, 144.4870},
                {-638.414185, 112.837776, 148.5016},
                {-636.990601, 112.837776, 152.3075},
                {-634.830017, 112.837776, 155.7490},
                {-632.020813, 112.837776, 158.6850},
                {-628.678101, 112.837776, 160.9956},
                {-624.938782, 112.837776, 162.5859},
                {-615.007690, 112.837776, 123.7194},
                {-611.126709, 112.837776, 124.9237},
                {-607.567627, 112.837776, 126.8845},
                {-604.476074, 112.837776, 129.5216},
                {-601.978577, 112.837776, 132.7270},
                {-600.177612, 112.837776, 136.3695},
                {-599.146484, 112.837776, 140.3000},
                {-598.927917, 112.837776, 144.3576},
                {-599.530273, 112.837776, 148.3762},
                {-600.929382, 112.837776, 152.1912},
                {-603.067871, 112.837776, 155.6465},
                {-605.857971, 112.837776, 158.6007},
                {-609.185730, 112.837776, 160.9327},
                {-612.914673, 112.837776, 162.5472},
                {-619.036804, 111.345573, 128.4451},
                {-622.048218, 111.345573, 128.7613},
                {-624.933228, 111.345573, 129.6769},
                {-627.574707, 111.345573, 131.1545},
                {-629.864685, 111.345573, 133.1336},
                {-631.709473, 111.345573, 135.5331},
                {-633.033630, 111.345573, 138.2549},
                {-633.782593, 111.345573, 141.1874},
                {-633.926025, 111.345573, 144.2107},
                {-633.457886, 111.345573, 147.2010},
                {-632.397522, 111.345573, 150.0359},
                {-630.788086, 111.345573, 152.5993},
                {-628.695679, 111.345573, 154.7863},
                {-626.205872, 111.345573, 156.5073},
                {-623.420593, 111.345573, 157.6919},
                {-616.023376, 111.345573, 128.7419},
                {-613.132629, 111.345573, 129.6388},
                {-610.481628, 111.345573, 131.0994},
                {-608.178772, 111.345573, 133.0636},
                {-606.318604, 111.345573, 135.4512},
                {-604.977112, 111.345573, 138.1644},
                {-604.209106, 111.345573, 141.0920},
                {-604.046204, 111.345573, 144.1144},
                {-604.494995, 111.345573, 147.1076},
                {-605.537109, 111.345573, 149.9493},
                {-607.129883, 111.345573, 152.5230},
                {-609.208191, 111.345573, 154.7234},
                {-611.686829, 111.345573, 156.4604},
                {-614.464417, 111.345573, 157.6630},
                {-619.002075, 109.628975, 139.1997},
                {-619.848572, 109.628975, 139.2885},
                {-620.659424, 109.628975, 139.5459},
                {-621.401917, 109.628975, 139.9612},
                {-622.045593, 109.628975, 140.5175},
                {-622.564087, 109.628975, 141.1919},
                {-622.936279, 109.628975, 141.9570},
                {-623.146912, 109.628975, 142.7813},
                {-623.187073, 109.628975, 143.6310},
                {-623.055603, 109.628975, 144.4715},
                {-622.757507, 109.628975, 145.2684},
                {-622.305176, 109.628975, 145.9889},
                {-621.716980, 109.628975, 146.6036},
                {-621.017212, 109.628975, 147.0873},
                {-620.234314, 109.628975, 147.4203},
                {-618.155090, 109.628975, 139.2831},
                {-617.342590, 109.628975, 139.5352},
                {-616.597412, 109.628975, 139.9457},
                {-615.950195, 109.628975, 140.4978},
                {-615.427307, 109.628975, 141.1689},
                {-615.050171, 109.628975, 141.9315},
                {-614.834412, 109.628975, 142.7544},
                {-614.788574, 109.628975, 143.6039},
                {-614.914673, 109.628975, 144.4453},
                {-615.207581, 109.628975, 145.2440},
                {-615.655273, 109.628975, 145.9674},
                {-616.239502, 109.628975, 146.5859},
                {-616.936218, 109.628975, 147.0742},
                {-617.716919, 109.628975, 147.4122},
                {-619.003296, 108.854378, 138.8369},
                {-619.922791, 108.854378, 138.9334},
                {-620.803589, 108.854378, 139.2130},
                {-621.610229, 108.854378, 139.6641},
                {-622.309387, 108.854378, 140.2684},
                {-622.872681, 108.854378, 141.0010},
                {-623.276917, 108.854378, 141.8321},
                {-623.505615, 108.854378, 142.7275},
                {-623.549377, 108.854378, 143.6506},
                {-623.406494, 108.854378, 144.5636},
                {-623.082703, 108.854378, 145.4292},
                {-622.591309, 108.854378, 146.2119},
                {-621.952515, 108.854378, 146.8796},
                {-621.192322, 108.854378, 147.4051},
                {-620.341797, 108.854378, 147.7668},
                {-618.083191, 108.854378, 138.9274},
                {-617.200623, 108.854378, 139.2013},
                {-616.391113, 108.854378, 139.6473},
                {-615.687988, 108.854378, 140.2470},
                {-615.119995, 108.854378, 140.9760},
                {-614.710388, 108.854378, 141.8044},
                {-614.475891, 108.854378, 142.6984},
                {-614.426086, 108.854378, 143.6212},
                {-614.563171, 108.854378, 144.5351},
                {-614.881409, 108.854378, 145.4028},
                {-615.367676, 108.854378, 146.1886},
                {-616.002319, 108.854378, 146.8604},
                {-616.759094, 108.854378, 147.3908},
                {-617.607178, 108.854378, 147.7580},
                {-618.999512, 107.993477, 140.0174},
                {-619.681274, 107.993477, 140.0890},
                {-619.897705, 108.040474, 139.0535},
                {-619.002930, 108.040474, 138.9595},
                {-620.334473, 107.993477, 140.2963},
                {-620.754883, 108.040474, 139.3255},
                {-620.932617, 107.993477, 140.6308},
                {-621.539795, 108.040474, 139.7645},
                {-621.450989, 107.993477, 141.0789},
                {-622.220215, 108.040474, 140.3526},
                {-621.868774, 107.993477, 141.6222},
                {-622.768372, 108.040474, 141.0656},
                {-622.168579, 107.993477, 142.2385},
                {-623.161804, 108.040474, 141.8743},
                {-622.338074, 107.993477, 142.9024},
                {-623.384277, 108.040474, 142.7457},
                {-622.370605, 107.993477, 143.5870},
                {-623.426880, 108.040474, 143.6440},
                {-622.264587, 107.993477, 144.2640},
                {-623.287903, 108.040474, 144.5325},
                {-622.024475, 107.993477, 144.9059},
                {-622.972778, 108.040474, 145.3748},
                {-621.660217, 107.993477, 145.4863},
                {-622.494629, 108.040474, 146.1365},
                {-621.186401, 107.993477, 145.9814},
                {-621.872925, 108.040474, 146.7863},
                {-620.622681, 107.993477, 146.3711},
                {-621.133118, 108.040474, 147.2977},
                {-619.992126, 107.993477, 146.6393},
                {-620.305481, 108.040474, 147.6497},
                {-618.998779, 107.411674, 140.2168},
                {-618.356689, 107.411674, 140.2800},
                {-618.556213, 107.077881, 141.2663},
                {-618.995605, 107.077881, 141.2230},
                {-617.740723, 107.411674, 140.4712},
                {-618.134583, 107.077881, 141.3971},
                {-617.175781, 107.411674, 140.7824},
                {-617.747986, 107.077881, 141.6101},
                {-616.685181, 107.411674, 141.2009},
                {-617.412170, 107.077881, 141.8965},
                {-616.288818, 107.411674, 141.7097},
                {-617.140991, 107.077881, 142.2447},
                {-616.002930, 107.411674, 142.2878},
                {-616.945374, 107.077881, 142.6403},
                {-615.839294, 107.411674, 142.9117},
                {-616.833374, 107.077881, 143.0672},
                {-615.804626, 107.411674, 143.5557},
                {-616.809570, 107.077881, 143.5079},
                {-615.900208, 107.411674, 144.1935},
                {-616.875122, 107.077881, 143.9444},
                {-616.122314, 107.411674, 144.7990},
                {-617.026978, 107.077881, 144.3588},
                {-616.461670, 107.411674, 145.3474},
                {-617.259277, 107.077881, 144.7341},
                {-616.904480, 107.411674, 145.8163},
                {-617.562378, 107.077881, 145.0550},
                {-617.432678, 107.411674, 146.1864},
                {-617.923828, 107.077881, 145.3083},
                {-618.024475, 107.411674, 146.4427},
                {-618.328918, 107.077881, 145.4836},
                {-618.655823, 107.411674, 146.5745},
                {-618.995483, 106.817978, 141.2186},
                {-619.435608, 106.817978, 141.2648},
                {-619.434692, 107.077881, 141.2691},
                {-619.857178, 106.817978, 141.3985},
                {-619.855408, 107.077881, 141.4026},
                {-620.243225, 106.817978, 141.6144},
                {-620.240601, 107.077881, 141.6181},
                {-620.577820, 106.817978, 141.9036},
                {-620.574524, 107.077881, 141.9067},
                {-620.847412, 106.817978, 142.2542},
                {-620.843628, 107.077881, 142.2566},
                {-621.040771, 106.817978, 142.6519},
                {-621.036621, 107.077881, 142.6535},
                {-621.150330, 106.817978, 143.0804},
                {-621.145813, 107.077881, 143.0811},
                {-621.171204, 106.817978, 143.5222},
                {-621.166687, 107.077881, 143.5220},
                {-621.102783, 106.817978, 143.9591},
                {-621.098511, 107.077881, 143.9580},
                {-620.947876, 106.817978, 144.3734},
                {-620.943787, 107.077881, 144.3714},
                {-620.712708, 106.817978, 144.7479},
                {-620.709229, 107.077881, 144.7452},
                {-620.406982, 106.817978, 145.0675},
                {-620.404114, 107.077881, 145.0641},
                {-620.043213, 106.817978, 145.3190},
                {-620.041016, 107.077881, 145.3151},
                {-619.636230, 106.817978, 145.4921},
                {-619.634827, 107.077881, 145.4878},
                {-618.555176, 106.817978, 141.2619},
                {-618.132812, 106.817978, 141.3930},
                {-617.745422, 106.817978, 141.6064},
                {-617.408875, 106.817978, 141.8935},
                {-617.137085, 106.817978, 142.2424},
                {-616.941223, 106.817978, 142.6388},
                {-616.828979, 106.817978, 143.0666},
                {-616.805176, 106.817978, 143.5082},
                {-616.870789, 106.817978, 143.9456},
                {-617.023071, 106.817978, 144.3608},
                {-617.255798, 106.817978, 144.7369},
                {-617.559509, 106.817978, 145.0584},
                {-617.921692, 106.817978, 145.3122},
                {-618.327515, 106.817978, 145.4879},
                {-619.000183, 105.990479, 139.7425},
                {-619.737488, 105.990479, 139.8199},
                {-620.443726, 105.990479, 140.0440},
                {-621.090271, 105.990479, 140.4057},
                {-621.650879, 105.990479, 140.8901},
                {-622.102478, 105.990479, 141.4775},
                {-622.426575, 105.990479, 142.1438},
                {-622.609985, 105.990479, 142.8616},
                {-622.645081, 105.990479, 143.6017},
                {-622.530518, 105.990479, 144.3337},
                {-622.270996, 105.990479, 145.0276},
                {-621.877014, 105.990479, 145.6551},
                {-621.364929, 105.990479, 146.1905},
                {-620.755371, 105.990479, 146.6118},
                {-620.073608, 105.990479, 146.9018},
                {-618.262512, 105.990479, 139.8152},
                {-617.554871, 105.990479, 140.0348},
                {-616.905884, 105.990479, 140.3923},
                {-616.342285, 105.990479, 140.8732},
                {-615.887024, 105.990479, 141.4577},
                {-615.558594, 105.990479, 142.1218},
                {-615.370728, 105.990479, 142.8385},
                {-615.330811, 105.990479, 143.5783},
                {-615.440674, 105.990479, 144.3111},
                {-615.695801, 105.990479, 145.0067},
                {-616.085815, 105.990479, 145.6367},
                {-616.594482, 105.990479, 146.1753},
                {-617.201294, 105.990479, 146.6004},
                {-617.881226, 105.990479, 146.8948},
                {-619.001892, 104.931778, 139.2372},
                {-619.840881, 104.931778, 139.3253},
                {-620.644470, 104.931778, 139.5803},
                {-621.380371, 104.931778, 139.9919},
                {-622.018188, 104.931778, 140.5432},
                {-622.532227, 104.931778, 141.2116},
                {-622.901001, 104.931778, 141.9698},
                {-623.109680, 104.931778, 142.7867},
                {-623.149719, 104.931778, 143.6289},
                {-623.019287, 104.931778, 144.4619},
                {-622.723877, 104.931778, 145.2516},
                {-622.275574, 104.931778, 145.9657},
                {-621.692688, 104.931778, 146.5749},
                {-620.999084, 104.931778, 147.0544},
                {-620.223328, 104.931778, 147.3844},
                {-618.162415, 104.931778, 139.3199},
                {-617.357117, 104.931778, 139.5698},
                {-616.618591, 104.931778, 139.9767},
                {-615.977173, 104.931778, 140.5239},
                {-615.458984, 104.931778, 141.1890},
                {-615.085327, 104.931778, 141.9448},
                {-614.871399, 104.931778, 142.7604},
                {-614.825989, 104.931778, 143.6023},
                {-614.951111, 104.931778, 144.4361},
                {-615.241516, 104.931778, 145.2277},
                {-615.685181, 104.931778, 145.9446},
                {-616.264221, 104.931778, 146.5576},
                {-616.954712, 104.931778, 147.0414},
                {-617.728394, 104.931778, 147.3764},
                {-618.999329, 104.801880, 140.0610},
                {-619.672424, 104.801880, 140.1317},
                {-620.317078, 104.801880, 140.3363},
                {-620.907471, 104.801880, 140.6665},
                {-621.419312, 104.801880, 141.1089},
                {-621.831604, 104.801880, 141.6451},
                {-622.127625, 104.801880, 142.2534},
                {-622.294983, 104.801880, 142.9088},
                {-622.327026, 104.801880, 143.5845},
                {-622.222412, 104.801880, 144.2529},
                {-621.985413, 104.801880, 144.8864},
                {-621.625671, 104.801880, 145.4594},
                {-621.158081, 104.801880, 145.9481},
                {-620.601685, 104.801880, 146.3328},
                {-619.979187, 104.801880, 146.5975},
                {-618.325684, 104.801880, 140.1274},
                {-617.679626, 104.801880, 140.3279},
                {-617.087219, 104.801880, 140.6543},
                {-616.572510, 104.801880, 141.0933},
                {-616.156799, 104.801880, 141.6270},
                {-615.856995, 104.801880, 142.2334},
                {-615.685425, 104.801880, 142.8877},
                {-615.648987, 104.801880, 143.5632},
                {-615.749329, 104.801880, 144.2321},
                {-615.982178, 104.801880, 144.8672},
                {-616.338318, 104.801880, 145.4424},
                {-616.802673, 104.801880, 145.9342},
                {-617.356812, 104.801880, 146.3224},
                {-617.977478, 104.801880, 146.5911},
                {-618.107483, 108.040474, 139.0477},
                {-617.248474, 108.040474, 139.3142},
                {-616.460876, 108.040474, 139.7482},
                {-615.776611, 108.040474, 140.3318},
                {-615.223877, 108.040474, 141.0412},
                {-614.825317, 108.040474, 141.8474},
                {-614.597107, 108.040474, 142.7173},
                {-614.548706, 108.040474, 143.6154},
                {-614.682007, 108.040474, 144.5047},
                {-614.991699, 108.040474, 145.3491},
                {-615.465027, 108.040474, 146.1138},
                {-616.082520, 108.040474, 146.7676},
                {-616.818970, 108.040474, 147.2838},
                {-617.644287, 108.040474, 147.6411},
                {-619.300781, 107.411674, 146.5766},
                {-619.640503, 107.411674, 140.2842},
                {-620.255188, 107.411674, 140.4793},
                {-620.818115, 107.411674, 140.7942},
                {-621.306091, 107.411674, 141.2159},
                {-621.699219, 107.411674, 141.7272},
                {-621.981323, 107.411674, 142.3071},
                {-622.140930, 107.411674, 142.9320},
                {-622.171387, 107.411674, 143.5762},
                {-622.071716, 107.411674, 144.2134},
                {-621.845825, 107.411674, 144.8175},
                {-621.502808, 107.411674, 145.3637},
                {-621.057007, 107.411674, 145.8297},
                {-620.526428, 107.411674, 146.1964},
                {-619.932922, 107.411674, 146.4488},
                {-618.317200, 107.993477, 140.0846},
                {-617.662720, 107.993477, 140.2877},
                {-617.062378, 107.993477, 140.6183},
                {-616.541077, 107.993477, 141.0631},
                {-616.119873, 107.993477, 141.6037},
                {-615.816223, 107.993477, 142.2180},
                {-615.642273, 107.993477, 142.8808},
                {-615.605286, 107.993477, 143.5651},
                {-615.706970, 107.993477, 144.2429},
                {-615.942871, 107.993477, 144.8863},
                {-616.303589, 107.993477, 145.4690},
                {-616.774109, 107.993477, 145.9672},
                {-617.335327, 107.993477, 146.3605},
                {-617.964172, 107.993477, 146.6328}
            };

            std::vector<float> verts;
            verts.reserve(verts_.size() * 3);
            glm::vec3 min = glm::vec3(1000000000000000000);
            glm::vec3 max = glm::vec3(-1000000000000000000);
            for (auto vert : verts_) {
                verts.push_back(vert.x);
                verts.push_back(vert.y);
                verts.push_back(vert.z);
                min = glm::min(min, vert);
                max = glm::max(max, vert);
            }
            mesh->addVertexBuffer(VertexType::Position, 0, 3, verts);
            mesh->mMin = min;
            mesh->mMax = max;

            mesh->mPrimitiveType = GL_TRIANGLES;
        }
        Library::loadMesh("nCube", mesh);

        ecs.addComponent<BoundingBoxComponent>(cube, *mesh);
        ecs.addComponent<MeshComponent>(cube, *mesh);
    }

    /* Ground plane */
    GameObject* plane = &ecs.createGameObject("Grid");
    ecs.addComponent<SpatialComponent>(plane, glm::vec3(0.f), glm::vec3(15.f), glm::vec3(-util::PI / 2.f, 0.f, 0.f));
    ecs.addComponent<MeshComponent>(plane, *Library::getMesh("quad"));
    ecs.addComponent<renderable::AlphaTestRenderable>(plane, *Library::loadTexture("grid.png"));

    /* Systems - order matters! */
    ecs.addSystem<CameraControllerSystem>();
    ecs.addSystem<RotationSystem>();

    /* Init renderer */
    Renderer::addSceneShader<PhongShader>();
    Renderer::addSceneShader<AlphaTestShader>();
}

void BaseDemo::update(ECS& ecs) {
    NEO_UNUSED(ecs);
}

void BaseDemo::destroy() {
}


